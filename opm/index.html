<!DOCTYPE html> 
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è·¨å¸‚åœºå¥—åˆ©ç›‘æ§ - XXLB</title>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <style>
        :root {
            --bg-body: #020617;
            --bg-nav: #020617;
            --bg-panel: #020617;
            --bg-header-strip: #020617;
            --bg-controls: #020617;
            --bg-table-header: #020617;
            --bg-row-alt: #020617;
            --border-subtle: #1f2937;
            --border-strong: #334155;
            --text-main: #e5e7eb;
            --text-muted: #9ca3af;
            --accent: #38bdf8;
            --accent-soft: rgba(56, 189, 248, 0.16);
            --row-hover: rgba(148, 163, 184, 0.18);
        }

        * { box-sizing: border-box; }

        body {
            margin: 0;
            padding: 0;
            font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
            background: radial-gradient(circle at top left, #0b1120 0, #020617 45%, #000 100%);
            color: var(--text-main);
        }

        #app {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        /* é¡¶éƒ¨å¯¼èˆªæ  */
        .top-nav {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 12px 24px;
            background: linear-gradient(to right, #020617 0%, #020617 55%, #020617 100%);
            border-bottom: 1px solid rgba(148, 163, 184, 0.3);
            box-shadow: 0 12px 40px rgba(15, 23, 42, 0.7);
            position: sticky;
            top: 0;
            z-index: 20;
        }

        .nav-left {
            display: flex;
            align-items: center;
            gap: 16px;
        }
        
        .logo-container {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .brand-logo-img {
            width: 40px;
            height: 40px;
            border-radius: 10px; /* è¿™é‡Œä¿æŒåœ†è§’çŸ©å½¢è¿˜æ˜¯åœ†å½¢ï¼Ÿå¦‚æœæ˜¯é¡¶éƒ¨å“ç‰ŒLogoé€šå¸¸ä¿æŒåŸæ ·ï¼Œä¸‹é¢æ”¹çš„æ˜¯åˆ—è¡¨é‡Œçš„å¹³å°Logo */
            object-fit: contain;
        }

        .brand-info {
            display: flex;
            flex-direction: column;
            gap: 2px;
        }

        .brand-top {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .brand-title {
            font-size: 18px;
            font-weight: 700;
            letter-spacing: 0.03em;
            color: #fff;
        }

        .brand-badge {
            font-size: 11px;
            padding: 2px 6px;
            border-radius: 999px;
            border: 1px solid rgba(148, 163, 184, 0.5);
            color: #e5e7eb;
            background: radial-gradient(circle at top left, rgba(251, 191, 36, 0.4), transparent 60%);
        }

        .brand-subtitle {
            font-size: 12px;
            color: #94a3b8;
        }

        .nav-center {
            display: flex;
            align-items: center;
            gap: 14px;
        }

        .nav-tab {
            padding: 6px 12px;
            border-radius: 999px;
            font-size: 13px;
            color: #9ca3af;
            cursor: pointer;
            border: 1px solid transparent;
            display: inline-flex;
            align-items: center;
            gap: 6px;
            text-decoration: none;
            transition: all 0.2s;
        }

        .nav-tab:hover {
            color: #e5e7eb;
            background: rgba(148, 163, 184, 0.1);
        }

        .nav-tab span.badge {
            font-size: 11px;
            padding: 1px 6px;
            border-radius: 999px;
            background-color: rgba(30, 64, 175, 0.4);
            color: #93c5fd;
            border: 1px solid rgba(59, 130, 246, 0.6);
        }

        .nav-tab.active {
            background: radial-gradient(circle at top center, rgba(14, 165, 233, 0.35), rgba(8, 47, 73, 0.95));
            color: #e5e7eb;
            border-color: rgba(56, 189, 248, 0.8);
            box-shadow: 0 0 0 1px rgba(15, 23, 42, 1), 0 12px 30px rgba(8, 47, 73, 0.9);
        }

        .nav-tab.muted {
            opacity: 0.8;
        }

        .nav-tab .pill {
            font-size: 10px;
            padding: 1px 6px;
            border-radius: 999px;
            background: rgba(15, 23, 42, 0.9);
            border: 1px solid rgba(148, 163, 184, 0.5);
            color: #94a3b8;
        }

        .nav-right {
            display: flex;
            align-items: center;
            gap: 16px;
        }

        .search-box {
            position: relative;
        }

        .search-input {
            width: 180px;
            padding: 6px 28px 6px 10px;
            border-radius: 999px;
            border: 1px solid rgba(51, 65, 85, 0.9);
            background: radial-gradient(circle at 0 0, rgba(15,23,42,0.9), rgba(2,6,23,0.95));
            color: #e5e7eb;
            font-size: 13px;
        }

        .search-input::placeholder {
            color: #64748b;
        }

        .icon-group {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .tool-link {
            display: flex;
            align-items: center;
            justify-content: center;
            color: inherit;
        }

        .tool-icon {
            width: 20px;
            height: 20px;
            fill: var(--text-muted);
            cursor: pointer;
            transition: fill 0.2s;
        }
        .tool-icon:hover { fill: var(--text-main); }

        .main-layout {
            flex: 1;
            display: flex;
            padding: 20px 24px 20px;
            gap: 24px;
        }

        .left-panel {
            width: 280px;
            min-width: 260px;
            background: linear-gradient(145deg, #020617 0%, #020617 55%, #111827 100%);
            border-radius: 18px;
            border: 1px solid rgba(30, 64, 175, 0.5);
            box-shadow: 0 24px 60px rgba(15, 23, 42, 0.9);
            padding: 16px 14px 14px;
            position: sticky;
            top: 64px;
            align-self: flex-start;
        }

        .left-panel-title {
            font-size: 15px;
            font-weight: 600;
            margin-bottom: 6px;
        }
        .left-panel-tagline {
            font-size: 12px;
            color: #9ca3af;
            margin-bottom: 12px;
        }

        .left-panel-section {
            margin-bottom: 16px;
        }

        .left-section-title {
            font-size: 13px;
            font-weight: 600;
            color: #e5e7eb;
            margin-bottom: 6px;
        }

        .left-section-content {
            font-size: 12px;
            color: #94a3b8;
            line-height: 1.6;
        }

        .left-section-content strong {
            color: #e5e7eb;
            font-weight: 600;
        }

        /* --- åè¯è§£é‡Šé«˜äº®ç›’å­ --- */
        .explanation-box {
            background: linear-gradient(to bottom right, rgba(59, 130, 246, 0.12), rgba(15, 23, 42, 0.8));
            border: 1px solid rgba(96, 165, 250, 0.4);
            border-radius: 12px;
            padding: 14px;
            margin-bottom: 20px;
            box-shadow: 0 0 20px rgba(59, 130, 246, 0.08);
            position: relative;
            overflow: hidden;
        }
        
        .explanation-box::before {
            content: "";
            position: absolute;
            left: 0;
            top: 0;
            bottom: 0;
            width: 3px;
            background: #60a5fa;
            box-shadow: 0 0 8px #60a5fa;
        }

        .explanation-box .left-section-title {
            color: #93c5fd;
            font-size: 14px;
            font-weight: 700;
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            gap: 6px;
            text-shadow: 0 0 10px rgba(147, 197, 253, 0.3);
        }

        .explanation-box .item-group {
            margin-bottom: 12px;
        }

        .explanation-box .item-title {
            color: #fff;
            font-weight: 600;
            font-size: 13px;
            display: block;
            margin-bottom: 2px;
        }

        .explanation-box .item-desc {
            color: #cbd5e1;
            font-size: 12px;
            line-height: 1.5;
            opacity: 0.9;
        }

        .explanation-box .note {
            font-size: 11px; 
            color: #94a3b8; 
            border-top: 1px dashed rgba(148,163,184,0.3); 
            padding-top: 8px; 
            margin-top: 8px;
            line-height: 1.4;
        }

        /* --- åº•éƒ¨æ¨å¹¿å¡ç‰‡é«˜äº®æ ·å¼ --- */
        .footer-box {
            margin-top: 24px;
            background: linear-gradient(135deg, rgba(30, 64, 175, 0.15), rgba(15, 23, 42, 0.8));
            border: 1px solid rgba(59, 130, 246, 0.3);
            border-radius: 12px;
            padding: 20px;
            text-align: center;
            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.2);
            position: relative;
            overflow: hidden;
        }
        
        .footer-box::after {
            content: "";
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(59, 130, 246, 0.06) 0%, transparent 60%);
            animation: pulse 6s infinite ease-in-out;
            pointer-events: none;
        }

        .footer-box-text {
            position: relative;
            z-index: 2;
            font-size: 13px;
            color: #cbd5e1;
            font-weight: 500;
            margin-bottom: 12px;
            letter-spacing: 0.5px;
        }

        .footer-box-btn {
            position: relative;
            z-index: 2;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            background: linear-gradient(90deg, #2563eb, #0ea5e9);
            color: #ffffff;
            padding: 8px 24px;
            border-radius: 999px;
            font-size: 13px;
            font-weight: 700;
            text-decoration: none;
            box-shadow: 0 4px 12px rgba(14, 165, 233, 0.4);
            transition: all 0.2s ease;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .footer-box-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(14, 165, 233, 0.5);
            filter: brightness(1.1);
        }

        .arrow-icon {
            font-size: 14px;
            transition: transform 0.2s;
        }
        
        .footer-box-btn:hover .arrow-icon {
            transform: translate(2px, -2px);
        }

        @keyframes pulse {
            0% { transform: scale(1); opacity: 0.8; }
            50% { transform: scale(1.1); opacity: 1; }
            100% { transform: scale(1); opacity: 0.8; }
        }

        .left-footnote {
            margin-top: 10px;
            font-size: 11px;
            color: #64748b;
        }

        .right-panel {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .panel-header-strip {
            background: radial-gradient(circle at top center, rgba(15,23,42,1), rgba(2,6,23,1));
            border-radius: 16px;
            border: 1px solid rgba(31, 41, 55, 0.9);
            padding: 12px 14px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            box-shadow: 0 18px 40px rgba(15, 23, 42, 0.9);
        }

        .panel-header-left {
            display: flex;
            flex-direction: column;
        }

        .panel-title-row {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .panel-title {
            font-size: 16px;
            font-weight: 600;
        }

        .panel-subtitle {
            font-size: 12px;
            color: #9ca3af;
        }

        .panel-badge-row {
            margin-top: 4px;
            display: flex;
            gap: 8px;
        }

        .panel-badge {
            font-size: 11px;
            padding: 2px 8px;
            border-radius: 999px;
            background: rgba(15, 23, 42, 0.95);
            border: 1px solid rgba(156, 163, 175, 0.8);
            display: inline-flex;
            align-items: center;
            gap: 4px;
        }

        .panel-badge span.dot {
            width: 6px;
            height: 6px;
            border-radius: 999px;
            background: linear-gradient(135deg, #22c55e, #a3e635);
        }

        .panel-badge span.dot.red {
            background: linear-gradient(135deg, #ef4444, #fb7185);
        }

        .panel-header-right {
            display: flex;
            flex-direction: column;
            align-items: flex-end;
            gap: 6px;
        }

        .header-actions {
            display: flex;
            gap: 8px;
        }

        .header-btn {
            padding: 6px 10px;
            border-radius: 999px;
            border: 1px solid rgba(31, 41, 55, 0.9);
            background: radial-gradient(circle at top left, rgba(15,23,42,1), rgba(2,6,23,1));
            color: #e5e7eb;
            font-size: 12px;
            cursor: pointer;
            display: inline-flex;
            align-items: center;
            gap: 4px;
        }

        .header-btn.primary {
            background: radial-gradient(circle at top, rgba(34,211,238,0.4), rgba(8,47,73,1));
            border-color: rgba(56,189,248,0.85);
            box-shadow: 0 0 0 1px rgba(15,23,42,1), 0 12px 35px rgba(8,47,73,0.95);
            font-weight: 500;
        }

        .header-btn span.icon-dot {
            width: 6px;
            height: 6px;
            border-radius: 999px;
            background: radial-gradient(circle, #22c55e, #bef264);
        }

        .filter-bar {
            margin-top: 8px;
            background: radial-gradient(circle at 0 0, rgba(30,64,175,0.26), rgba(15,23,42,0.95));
            border-radius: 16px;
            border: 1px solid rgba(30, 64, 175, 0.7);
            padding: 10px 14px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 10px;
        }

        .filter-left {
            display: flex;
            align-items: center;
            gap: 10px;
            flex-wrap: wrap;
        }

        .filter-item {
            display: flex;
            align-items: center;
            gap: 6px;
            font-size: 12px;
            color: #9ca3af;
        }

        .filter-item label {
            white-space: nowrap;
        }

        .filter-input,
        .filter-select {
            background: rgba(15, 23, 42, 0.95);
            border-radius: 999px;
            border: 1px solid rgba(51, 65, 85, 0.9);
            color: #e5e7eb;
            font-size: 12px;
            padding: 5px 9px;
            min-width: 60px;
        }

        .filter-right {
            display: flex;
            gap: 8px;
        }

        .filter-btn {
            padding: 6px 10px;
            border-radius: 999px;
            border: 1px solid rgba(31, 41, 55, 0.9);
            background: rgba(15, 23, 42, 0.95);
            color: #e5e7eb;
            font-size: 12px;
            cursor: pointer;
            display: inline-flex;
            align-items: center;
            gap: 4px;
        }

        .filter-btn.primary {
            background: linear-gradient(135deg, #22c55e, #16a34a);
            border-color: rgba(22, 163, 74, 0.95);
            box-shadow: 0 8px 24px rgba(21, 128, 61, 0.8);
            color: #ecfdf5;
        }

        .card-list {
            margin-top: 12px;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .card {
            background: radial-gradient(circle at top left, rgba(15,23,42,1), rgba(2,6,23,1));
            border-radius: 18px;
            border: 1px solid rgba(31, 41, 55, 0.9);
            display: flex;
            align-items: stretch;
            padding: 12px 12px 12px 14px;
            gap: 12px;
            box-shadow: 0 20px 55px rgba(15, 23, 42, 0.95);
            position: relative;
        }

        .card::before {
            content: "";
            position: absolute;
            inset: 0;
            border-radius: 18px;
            padding: 1px;
            background: linear-gradient(135deg, rgba(56,189,248,0.11), rgba(30,64,175,0.15), rgba(236,72,153,0.1));
            -webkit-mask: linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0);
            -webkit-mask-composite: xor;
            mask-composite: exclude;
            opacity: 0.7;
            pointer-events: none;
        }

        .card-left {
            flex: 1.5;
        }

        .event-row {
            display: flex;
            align-items: flex-start; /* å…³é”®ä¿®æ”¹ */
            gap: 10px;
            margin-bottom: 12px; /* å…³é”®ä¿®æ”¹ */
        }
        
        .event-row:last-child {
            margin-bottom: 0;
        }

        .icon-box {
            width: 42px;
            height: 42px;
            border-radius: 50%; /* å…³é”®ä¿®æ”¹ï¼šå˜æˆåœ†å½¢ */
            display: flex;
            align-items: center;
            justify-content: center;
            background: transparent;
            padding: 0;
            overflow: hidden;
            flex-shrink: 0;
            border: none; 
        }
        
        .platform-icon-img {
            width: 100%;
            height: 100%;
            object-fit: contain;
            border-radius: 50%; /* å…³é”®ä¿®æ”¹ï¼šå˜æˆåœ†å½¢ */
        }

        .event-details h3 {
            margin: 0;
            font-size: 14px;
            font-weight: 600;
            color: #e5e7eb;
            display: flex;
            align-items: center;
            flex-wrap: wrap;
            line-height: 1.4;
        }

        .event-details h3 a {
            color: inherit;
            text-decoration: none;
        }

        .event-details h3 a:hover {
            text-decoration: underline;
        }

        /* --- æ–¹å‘æ ‡ç­¾æ ·å¼ --- */
        .side-badge {
            display: inline-flex;
            align-items: center;
            font-size: 11px;
            font-weight: 700;
            padding: 1px 6px;
            border-radius: 4px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-right: 8px; /* å³ä¾§ç•™ç™½ */
            flex-shrink: 0;
            line-height: 1.2;
            vertical-align: middle;
        }
        
        /* YES - ç»¿è‰² */
        .side-badge.yes {
            background-color: rgba(34, 197, 94, 0.15);
            color: #4ade80;
            border: 1px solid rgba(34, 197, 94, 0.3);
        }

        /* NO - çº¢è‰² */
        .side-badge.no {
            background-color: rgba(239, 68, 68, 0.15);
            color: #f87171;
            border: 1px solid rgba(239, 68, 68, 0.3);
        }

        .event-details p {
            margin: 4px 0 0;
            font-size: 12px;
            color: #9ca3af;
            display: flex;
            align-items: center;
        }

        .card-stats {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 6px;
            padding: 0 10px;
            border-left: 1px dashed rgba(55, 65, 81, 0.8);
            border-right: 1px dashed rgba(55, 65, 81, 0.8);
        }

        .stat-row {
            display: flex;
            justify-content: space-between;
            font-size: 12px;
            align-items: center;
        }

        .stat-label {
            color: #9ca3af;
        }

        .stat-value {
            font-weight: 600;
        }

        .stat-value.green {
            color: #4ade80;
        }

        .stat-value.red {
            color: #f97373;
        }

        .card-right {
            flex: 0.9;
            display: flex;
            flex-direction: column;
            align-items: flex-end;
            justify-content: space-between;
            gap: 8px;
        }

        .timer {
            font-size: 11px;
            color: #e5e7eb;
            display: inline-flex;
            gap: 4px;
            align-items: center;
        }

        .timer span {
            display: inline-block;
            padding: 3px 6px;
            border-radius: 8px;
            background: rgba(15, 23, 42, 0.9);
            border: 1px solid rgba(75, 85, 99, 0.85);
            min-width: 26px;
            text-align: center;
        }

        .action-btn {
            padding: 7px 12px;
            font-size: 12px;
            border-radius: 999px;
            border: 1px solid rgba(55, 65, 81, 0.95);
            background: radial-gradient(circle at 0 0, rgba(15,23,42,1), rgba(2,6,23,1));
            color: #e5e7eb;
            cursor: pointer;
            display: inline-flex;
            align-items: center;
            gap: 6px;
        }

        .action-btn.executable {
            background: linear-gradient(135deg, #22c55e, #16a34a);
            border-color: rgba(22, 163, 74, 0.95);
            box-shadow: 0 12px 24px rgba(22, 163, 74, 0.85);
            color: #ecfdf5;
        }

        .action-btn.monitor-soon {
            background: transparent;
            border: 1px solid rgba(148, 163, 184, 0.3);
            color: rgba(148, 163, 184, 0.6);
            cursor: not-allowed;
        }

        .action-btn:hover {
            filter: brightness(1.05);
        }

        .loading {
            text-align: center;
            padding: 40px 0;
            color: #9ca3af;
        }

        .footer-hint {
            margin-top: 16px;
            font-size: 10px;
            color: #64748b;
            text-align: center;
        }

        .external-link {
            font-size: 12px;
            color: #9ca3af;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 4px;
            margin-top: 4px;
        }

        .external-link:hover {
            color: #e5e7eb;
        }

        .arrow-icon {
            font-size: 13px;
        }

        @media (max-width: 960px) {
            .main-layout {
                flex-direction: column;
            }
            .left-panel {
                position: static;
                width: 100%;
            }
        }

        @media (max-width: 720px) {
            .top-nav {
                flex-direction: column;
                align-items: flex-start;
                gap: 8px;
            }
            .nav-center {
                order: 3;
                width: 100%;
                justify-content: flex-start;
                overflow-x: auto;
            }
            .nav-right {
                align-self: flex-end;
            }
            .main-layout {
                padding: 14px 12px 20px;
            }
        }

        .pagination {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 12px;
            margin: 24px 0 16px;
        }
        .pagination .page-btn {
            padding: 6px 14px;
            border-radius: 8px;
            border: 1px solid var(--border-subtle);
            background: var(--bg-controls);
            color: var(--text-main);
            font-size: 13px;
            cursor: pointer;
        }
        .pagination .page-btn:disabled {
            opacity: 0.4;
            cursor: default;
        }
        .pagination .page-info {
            font-size: 13px;
            color: var(--text-muted);
        }
    </style>
</head>

<body>
<div id="app">
    <header class="top-nav">
        <div class="nav-left">
            <div class="logo-container">
                <img src="op.png" alt="Opinion" class="brand-logo-img">
                <img src="pm.png" alt="Polymarket" class="brand-logo-img">
            </div>
            <div class="brand-info">
                <div class="brand-top">
                    <span class="brand-title">è·¨å¸‚åœºå¥—åˆ©</span>
                    <span class="brand-badge">XXLB</span>
                </div>
                <div class="brand-subtitle">è¿™ä¸ªçœ‹æ¿...æ€ä¹ˆè¯´å‘¢ï¼Ÿæœ‰ç‚¹ä¸œè¥¿ï¼Œä½†ä¸å¤š...</div>
            </div>
        </div>

        <div class="nav-center">
            <a href="https://xxlb.one/" target="_blank" class="nav-tab muted" @click="trackEvent('click_nav', {target: 'PMçœ‹æ¿'})">
                PMçœ‹æ¿
                <span class="pill">Polymarket</span>
            </a>
            <a href="https://opinion.xxlb.one/" target="_blank" class="nav-tab muted" @click="trackEvent('click_nav', {target: 'OPçœ‹æ¿'})">
                OPçœ‹æ¿
                <span class="pill">Opinion</span>
            </a>
            <div class="nav-tab active">
                è·¨å¸‚åœºå¥—åˆ©
                <span class="badge">Beta</span>
            </div>
            <a href="https://t.me/meme_tvt" target="_blank" class="nav-tab muted" @click="trackEvent('click_nav', {target: 'TGç¾¤'})">
                åŠ å…¥TGå†…æµ‹
                <span class="pill">åé¦ˆ</span>
            </a>
        </div>

        <div class="nav-right">
            <div class="search-box">
                <input type="text" class="search-input" placeholder="æœç´¢è¯é¢˜...">
            </div>
            <div class="icon-group">
               
                <a href="https://x.com/youknow028" target="_blank" class="tool-link" @click="trackEvent('click_social', {type: 'twitter_header'})">
                    <svg class="tool-icon" viewBox="0 0 24 24">
                        <path d="M23.953 4.57a10 10 0 01-2.825.775A4.958 4.958 0 0023.337 3a9.864 9.864 0 01-3.127 1.195 4.92 4.92 0 00-8.384 4.482A13.978 13.978 0 011.671 3.149a4.822 4.822 0 001.523 6.573 4.903 4.903 0 01-2.229-.616v.06a4.923 4.923 0 003.946 4.827 4.996 4.996 0 01-2.224.085 4.936 4.936 0 004.604 3.417A9.867 9.867 0 010 20.412 13.94 13.94 0 007.548 22c9.142 0 14.307-7.721 13.995-14.646A10.025 10.025 0 0024 4.59z"/>
                    </svg>
                </a>
            </div>
        </div>
    </header>

    <main class="main-layout">
        <aside class="left-panel">
            <div class="left-panel-title">è¿™ä¸ªé¢æ¿ï¼Œæ˜¯å¹²å˜›çš„ï¼Ÿ</div>
            <div class="left-panel-tagline">
                ç®€å•è®²ï¼šå¸®ä½ çœ‹æ¸…ã€ŒåŒä¸€äº‹ä»¶ï¼Œåœ¨ä¸åŒå¸‚åœºçš„ä»·æ ¼é”™é…ã€ï¼Œçœ‹çœ‹å“ªé‡Œåœ¨ä¹±å–Šï¼Œå“ªé‡Œåœ¨è£…æ­»ã€‚
            </div>

            <div class="left-panel-section">
                <div class="left-section-title">ç›®å‰æ”¯æŒçš„ç»„åˆ</div>
                <div class="left-section-content">
                    Â· POLY & OPINION<br>
                    Â· åé¢å¯ä»¥æ¥å…¥æ›´å¤šèµ”ç‡å¸‚åœº & é¢„æµ‹å¸‚åœº<br>
                    Â· é‡ç‚¹ç›‘æ§ï¼šå®è§‚äº‹ä»¶ / åäººäº‹ä»¶ / å¤§ç›˜ç›¸å…³é¢„æœŸ
                </div>
            </div>

            <div class="explanation-box">
                <div class="left-section-title">
                    <span>ğŸ’¡</span> æ ¸å¿ƒåè¯è§£é‡Š
                </div>
                <div class="left-section-content">
                    <div class="item-group">
                        <span class="item-title">å¯å¥—åˆ©ç©ºé—´</span>
                        <span class="item-desc">åŒè¾¹å¸‚åœºå¯¹äºåŒä¸€ä¸ªé¢„æµ‹äº‹ä»¶çš„YESå’ŒNOåœ¨è®¢å•ç°¿ä¸Šçš„æŒ‚å•ä»·æ ¼ä¹‹å’Œå°äº100%çš„å·®å€¼</span>
                    </div>
                    <div class="item-group">
                        <span class="item-title">å¯å¥—åˆ©èµ„é‡‘</span>
                        <span class="item-desc">åŒè¾¹å¸‚åœºä¸Šè®¢å•ç°¿ä¸Šå­˜åœ¨å¯å¥—åˆ©ç©ºé—´çš„æŒ‚å•æ€»é‡‘é¢</span>
                    </div>
                    <div class="item-group">
                        <span class="item-title">é¢„è®¡æ”¶ç›Š</span>
                        <span class="item-desc">æ¨¡æ‹Ÿå°†å­˜åœ¨å¥—åˆ©ç©ºé—´çš„æŒ‚å•å…¨éƒ¨åƒæ‰åçš„æ€»æ”¶ç›Š</span>
                    </div>
                    <div class="note">
                        æ³¨ï¼šè¿™é‡Œæ˜¯ç†æƒ³æƒ…å†µï¼Œå®é™…æƒ…å†µéœ€è¦è€ƒè™‘äº¤æ˜“æ»‘ç‚¹ã€æ‰‹ç»­è´¹ç­‰æƒ…å†µ
                    </div>
                </div>
            </div>

            <div class="left-panel-section">
                <div class="left-section-title">æ€ä¹ˆç”¨æ›´èˆ’æœï¼Ÿ</div>
                <div class="left-section-content">
                    é»˜è®¤å»ºè®®ï¼š<br>
                    Â· æŠŠæ’åºæ–¹å¼è°ƒæˆã€Œå¥—åˆ©ç©ºé—´ã€çœ‹çœ‹æœ‰æ²¡æœ‰ç‰¹åˆ«ç¦»è°±çš„é”™ä»·<br>
                    Â· æŠŠæœ€å°èµ„é‡‘è®¾æˆä½ è‡ªå·±èƒ½æ¥å—çš„ä»“ä½ï¼Œä¸è¦è¢«å°é¢å¥—åˆ©å™ªéŸ³å¹²æ‰°<br>
                    Â· çœ‹åˆ°ã€Œå½“å‰ä¸å…·å¤‡ã€ä¸è¦æ€¥ï¼Œæœ‰äº›ç›˜å°±æ˜¯å¶å°”ç»™æœºä¼š
                </div>
            </div>

          

            <div class="left-footnote">
                æ³¨ï¼šæ‰€æœ‰ç»“æœä»…åšè§‚å¯Ÿå’Œæ¼”ç¤ºï¼Œä¸æ„æˆä»»ä½•æŠ•èµ„æˆ–äº¤æ˜“å»ºè®®ã€‚ä½ è¦æ˜¯çœŸç…§ç€ä¸Šï¼Œé‚£æ˜¯ä½ è‡ªå·±çš„äº‹ã€‚
            </div>
        </aside>

        <section class="right-panel">
            <div class="panel-header-strip">
                <div class="panel-header-left">
                    <div class="panel-title-row">
                        <div class="panel-title">è·¨å¸‚åœºå¥—åˆ©ç›‘æ§</div>
                    </div>
                    <div class="panel-subtitle">
                        å®æ—¶ä¸²è” POLY / Opinion ç­‰å¤šä¸ªç›˜å£ï¼Œç›¯ç€åŒä¸€äº‹ä»¶çš„ä»·æ ¼é”™é…ã€‚
                    </div>
                    <div class="panel-badge-row">
                        <div class="panel-badge">
                            <span class="dot"></span>
                            å®æ—¶æ‹‰å–
                        </div>
                        <div class="panel-badge">
                            <span class="dot red"></span>
                            ä¼˜å…ˆæç¤ºï¼šé«˜èµ”ç‡é”™ä»· + è¶³å¤Ÿå®¹é‡
                        </div>
                    </div>
                </div>
                <div class="panel-header-right">
                   
                    <div class="header-actions">
                        <button class="header-btn secondary" @click="refreshData(); trackEvent('click_refresh')">
                            æ‰‹åŠ¨åˆ·æ–°
                        </button>
                        <button class="header-btn primary">
                            <span class="icon-dot"></span>
                            å®ç›˜ç‰ˆï¼ˆè§„åˆ’ä¸­ï¼‰
                        </button>
                    </div>
                </div>
            </div>

            <div class="filter-bar">
                <div class="filter-left">
                    <div class="filter-item">
                        <label>æ’åºæ–¹å¼</label>
                        <select v-model="filters.sortBy" class="filter-select">
                            <option value="spread">å¥—åˆ©ç©ºé—´</option>
                            <option value="available_capital">å¯å¥—åˆ©èµ„é‡‘</option>
                            <option value="estimated_profit">é¢„è®¡æ”¶ç›Š</option>
                            <option value="end_time">ç»“æŸæ—¶é—´</option>
                        </select>
                    </div>
                    <div class="filter-item">
                        <label>æœ€å°å¥—åˆ©ç©ºé—´ï¼ˆ%ï¼‰</label>
                        <input
                            v-model="filters.minSpread"
                            type="number"
                            min="0"
                            step="0.1"
                            oninput="if(value<0)value=0"
                            class="filter-input"
                            placeholder="æ¯”å¦‚ 5"
                        >
                    </div>
                    <div class="filter-item">
                        <label>æœ€å°èµ„é‡‘ ($)</label>
                        <input
                            v-model="filters.minCapital"
                            type="number"
                            min="0"
                            step="100"
                            oninput="if(value<0)value=0"
                            class="filter-input"
                            placeholder="æ¯”å¦‚ 1000"
                        >
                    </div>
                </div>
                <div class="filter-right">
                    <button class="filter-btn" @click="() => { filters.minSpread=''; filters.minCapital=''; trackEvent('click_filter_clear'); }">
                        æ¸…ç©ºç­›é€‰
                    </button>
                    <button class="filter-btn primary" @click="refreshData(); trackEvent('click_filter', filters)">
                        é‡æ–°è®¡ç®—
                    </button>
                </div>
            </div>

            <div v-if="loading" class="loading">æ­£åœ¨è·å–å¸‚åœºæ•°æ®â€¦</div>

            <div v-else>
                <div class="card-list">
                    <div class="card" v-for="item in pagedList" :key="item.id">
                        <div class="card-left">
                            <div class="event-row" v-for="platform in item.platforms" :key="platform.name">
                                <div class="icon-box">
                                    <img :src="platform.icon_code === 'POLY' ? 'pm.png' : 'op.png'" class="platform-icon-img">
                                </div>
                                
                                <div class="event-details">
                                    <h3 :title="item.title">
                                        <a :href="platform.url" target="_blank">
                                            {{ cleanTitle(platform.title || item.title) }}
                                        </a>
                                    </h3>
                                    
                                    <p>
                                        <span v-if="getBestMetrics(item).spread_state === 'profitable'"
                                              class="side-badge"
                                              :class="getActionSide(item, platform.name).toLowerCase()">
                                            {{ getActionSide(item, platform.name) }}
                                        </span>
                                        {{ cleanTitle(item.description) }}
                                    </p>
                                </div>
                            </div>
                        </div>

                        <div class="card-stats">
                            <div class="stat-row">
                                <span class="stat-label">å¥—åˆ©ç©ºé—´</span>
                                <span
                                    class="stat-value"
                                    :class="getBestMetrics(item).spread_state === 'profitable' ? 'green' : 'red'"
                                >
                                    {{ getBestMetrics(item).spread_state === 'profitable'
                                        ? getBestMetrics(item).spread.toFixed(2) + '%'
                                        : 'å½“å‰ä¸å…·å¤‡' }}
                                </span>
                            </div>
                            <div class="stat-row">
                                <span class="stat-label">å¯å¥—åˆ©èµ„é‡‘</span>
                                <span class="stat-value">
                                    {{ formatCurrency(getBestMetrics(item).available_capital) }}
                                </span>
                            </div>
                            <div class="stat-row">
                                <span class="stat-label">é¢„è®¡æ”¶ç›Š</span>
                                <span class="stat-value">
                                    {{ formatCurrency(getBestMetrics(item).estimated_profit) }}
                                </span>
                            </div>
                        </div>

                        <div class="card-right">
                            <div class="timer" v-html="getCountdown(item.end_time)"></div>

                            <button
                                class="action-btn"
                                :class="item.action_status === 'executable' ? 'executable' : 'monitor-soon'"
                                @click="handleAction(item)"
                                :disabled="item.action_status !== 'executable'"
                            >
                                {{ item.action_status === 'executable' ? 'æ‰§è¡Œå¥—åˆ©soon...' : 'è®¾ç½®ç›‘æ§soon...' }}
                            </button>
                        </div>
                    </div>
                </div>

                <div class="pagination" v-if="pageCount > 1">
                    <button class="page-btn"
                            @click="goPrevPage"
                            :disabled="currentPageSafe === 1">
                        ä¸Šä¸€é¡µ
                    </button>
                    <span class="page-info">
                        ç¬¬ {{ currentPageSafe }} / {{ pageCount }} é¡µï¼ˆå…± {{ filteredList.length }} æ¡ï¼‰
                    </span>
                    <button class="page-btn"
                            @click="goNextPage"
                            :disabled="currentPageSafe === pageCount">
                        ä¸‹ä¸€é¡µ
                    </button>
                </div>
            </div>

            <div class="footer-box">
                <div class="footer-box-text">çœ‹åˆ°è¿™é‡Œçš„broï¼Œå¤§å®¶å¤šå…³æ³¨æˆ‘æ¨ç‰¹ å¹²è´§ç»å¯¹å¤š~</div>
                <a class="footer-box-btn" href="https://x.com/youknow028" target="_blank" @click="trackEvent('click_social', {type: 'twitter_footer'})">
                   Qçš„Twitter
                    <span class="arrow-icon">â†—</span>
                </a>
            </div>
        </section>
    </main>
</div>

<script>
const { createApp } = Vue;

createApp({
    data() {
        return {
            loading: false,
            currentTime: Date.now(),
            filters: {
                sortBy: 'spread', // é»˜è®¤æ’åº
                minSpread: '',
                minCapital: ''
            },
            arbitrageList: [],
            currentPage: 1,
            pageSize: 10
        };
    },
    computed: {
        filteredList() {
            // 1. å¤åˆ¶
            let list = this.arbitrageList.slice();

            // --- åŸºç¡€è¿‡æ»¤ï¼šåªæ˜¾ç¤º profitable çš„ ---
            list = list.filter(item => {
                const m = this.getBestMetrics(item);
                return m.spread_state === 'profitable';
            });

            const minSpread = parseFloat(this.filters.minSpread);
            const minCapital = parseFloat(this.filters.minCapital);

            // 2. æ•°å€¼ç­›é€‰
            if (!Number.isNaN(minSpread)) {
                list = list.filter(item => {
                    const m = this.getBestMetrics(item);
                    return m.spread >= minSpread;
                });
            }

            if (!Number.isNaN(minCapital)) {
                list = list.filter(item => {
                    const m = this.getBestMetrics(item);
                    return m.available_capital >= minCapital;
                });
            }

            // 3. æ’åºé€»è¾‘
            const sortBy = this.filters.sortBy;
            
            list.sort((a, b) => {
                const ma = this.getBestMetrics(a);
                const mb = this.getBestMetrics(b);

                // æ ¸å¿ƒï¼šèµšé’±çš„æ’å‰é¢ (åŒé‡ä¿é™©ï¼Œè™½ç„¶å·²è¢«è¿‡æ»¤)
                if (ma.spread_state === 'profitable' && mb.spread_state !== 'profitable') return -1;
                if (ma.spread_state !== 'profitable' && mb.spread_state === 'profitable') return 1;

                // å…·ä½“å­—æ®µé™åº
                if (sortBy === 'spread') {
                    return mb.spread - ma.spread;
                } else if (sortBy === 'available_capital') {
                    return mb.available_capital - ma.available_capital;
                } else if (sortBy === 'estimated_profit') {
                    return mb.estimated_profit - ma.estimated_profit;
                } else if (sortBy === 'end_time') {
                    const ea = this.normalizeEndTime(a.end_time);
                    const eb = this.normalizeEndTime(b.end_time);
                    return ea - eb; // æ—¶é—´å‡åº
                }
                return 0;
            });

            return list;
        },
        pageCount() {
            const total = this.filteredList.length;
            return total ? Math.ceil(total / this.pageSize) : 1;
        },
        currentPageSafe() {
            return Math.min(Math.max(this.currentPage, 1), this.pageCount);
        },
        pagedList() {
            const start = (this.currentPageSafe - 1) * this.pageSize;
            return this.filteredList.slice(start, start + this.pageSize);
        }
    },
    mounted() {
        this.fetchData();
        this.trackEvent('page_view', { page: 'arbitrage_monitor' });

        setInterval(() => {
            this.currentTime = Date.now();
        }, 1000);
    },
    methods: {
        async fetchData() {
            this.loading = true;
            try {
                const res = await fetch("/api/arbitrage").catch(() => null);
                if (res && res.ok) {
                    const data = await res.json();
                    this.arbitrageList = (data && data.data && Array.isArray(data.data.list)) ? data.data.list : [];
                    this.currentPage = 1;
                } else {
                    console.log("æ¼”ç¤ºæ¨¡å¼");
                    this.arbitrageList = [];
                }
            } catch (err) {
                console.error("Error", err);
            } finally {
                this.loading = false;
            }
        },
        refreshData() { this.fetchData(); },
        trackEvent(action, data = {}) {
            fetch('/api/track', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ action: action, timestamp: Date.now(), data: data })
            }).catch(err => { console.log('Track error:', err); });
        },
        getBestMetrics(item) {
            if (!item || !item.metrics) {
                return { spread: 0, spread_state: 'unavailable', available_capital: 0, estimated_profit: 0 };
            }
            const m = item.metrics;
            const normalize = (metricObj) => ({
                spread: Number(metricObj?.spread || 0),
                spread_state: metricObj?.spread_state || 'unavailable',
                available_capital: Number(metricObj?.available_capital || 0),
                estimated_profit: Number(metricObj?.estimated_profit || 0),
                _ref: metricObj
            });
            const d1 = normalize(m.pm_yes_op_no);
            const d2 = normalize(m.pm_no_op_yes);

            const d1Profitable = d1.spread_state === 'profitable';
            const d2Profitable = d2.spread_state === 'profitable';

            if (d1Profitable && !d2Profitable) return d1;
            if (!d1Profitable && d2Profitable) return d2;
            if (d1.spread > d2.spread) return d1;
            return d2;
        },
        // --- æ ‡é¢˜æ¸…æ´—é€»è¾‘ ---
        cleanTitle(title) {
            if (!title) return '';
            
            // 1. å¦‚æœæ ‡é¢˜åŒ…å« "/"ï¼Œåªå– "/" åé¢çš„éƒ¨åˆ†
            if (title.includes(' / ')) {
                const parts = title.split(' / ');
                return parts[parts.length - 1].trim();
            }

            // 2. ä¿®å¤ slug æ ‡é¢˜ (å…¨æ˜¯å°å†™+æ¨ªæ +æ— ç©ºæ ¼)
            if (title.includes('-') && !title.includes(' ')) {
                let text = title.replace(/-/g, ' ');
                text = text.replace(/\s\d+$/, ''); // å»æ‰æœ«å°¾æ•°å­—ID
                return text.charAt(0).toUpperCase() + text.slice(1);
            }
            return title;
        },
        // --- åˆ¤æ–­ä¹°å–æ–¹å‘ (YES/NO) ---
        getActionSide(item, platformName) {
            if (!item || !item.metrics) return '';
            const m = item.metrics;
            const s1 = m.pm_yes_op_no;
            const s1_valid = s1 && s1.spread_state === 'profitable';
            const s1_spread = s1 ? Number(s1.spread) : -999;
            const s2 = m.pm_no_op_yes;
            const s2_valid = s2 && s2.spread_state === 'profitable';
            const s2_spread = s2 ? Number(s2.spread) : -999;

            let bestStrategy = '';
            if (s1_valid && !s2_valid) bestStrategy = 'pm_yes_op_no';
            else if (!s1_valid && s2_valid) bestStrategy = 'pm_no_op_yes';
            else {
                bestStrategy = (s1_spread > s2_spread) ? 'pm_yes_op_no' : 'pm_no_op_yes';
            }

            const isPolymarket = platformName.toLowerCase() === 'polymarket';
            if (bestStrategy === 'pm_yes_op_no') {
                return isPolymarket ? 'YES' : 'NO';
            } else {
                return isPolymarket ? 'NO' : 'YES';
            }
        },
        formatCurrency(num) {
            if (num == null || isNaN(num)) return '--';
            return '$' + Number(num).toLocaleString(undefined, { maximumFractionDigits: 2 });
        },
        normalizeEndTime(endTime) {
            if (!endTime) return 0;
            if (typeof endTime === "number") return endTime < 1e12 ? endTime * 1000 : endTime;
            if (typeof endTime === "string") return Date.parse(endTime) || 0;
            return 0;
        },
        getCountdown(endTimeRaw) {
            if (endTimeRaw === null) {
                return '<span style="width: auto; padding: 3px 8px; color: #94a3b8; border-color: rgba(148, 163, 184, 0.3);">ç»“æŸæ—¶é—´ä¸ç¡®å®š è¯·å»OP/PMåˆ¤æ–­</span>';
            }
            const endTime = this.normalizeEndTime(endTimeRaw);
            const diff = endTime - this.currentTime;
            if (!endTime || diff <= 0) {
                return "<span>00</span> å¤© <span>00</span> æ—¶ <span>00</span> åˆ† <span>00</span> ç§’";
            }
            const days = Math.floor(diff / (1000 * 60 * 60 * 24));
            const hours = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
            const seconds = Math.floor((diff % (1000 * 60)) / 1000);
            const p = n => String(n).padStart(2, '0');
            return `<span>${p(days)}</span> å¤© <span>${p(hours)}</span> æ—¶ <span>${p(minutes)}</span> åˆ† <span>${p(seconds)}</span> ç§’`;
        },
        goPrevPage() {
            if (this.currentPageSafe > 1) {
                this.currentPage = this.currentPageSafe - 1;
            }
        },
        goNextPage() {
            if (this.currentPageSafe < this.pageCount) {
                this.currentPage = this.currentPageSafe + 1;
            }
        },
        handleAction(item) {
            this.trackEvent('click_action_btn', {
                pair_id: item.id,
                title: item.title,
                status: item.action_status,
                spread: this.getBestMetrics(item).spread
            });
            if (item.action_status === 'executable') {
                alert(`æ‰§è¡Œ: ${item.title}\nè¯·åœ¨äº¤æ˜“ç»ˆç«¯æ“ä½œã€‚`);
            }
        }
    }
}).mount('#app');
</script>

</body>
</html>
